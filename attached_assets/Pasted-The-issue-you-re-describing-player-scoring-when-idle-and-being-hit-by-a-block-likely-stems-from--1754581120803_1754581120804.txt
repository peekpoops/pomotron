The issue you're describing ‚Äî player scoring when idle and being hit by a block ‚Äî likely stems from this logic block in your obstacle update:

ts
Copy
Edit
if (obstacle.x < -obstacle.width) {
  setScore(s => {
    const newScore = s + 10;
    playSound('glitch-score');
    return newScore;
  });
  setSuccessBurst({ ... });
  return false;
}
This awards points unconditionally when the obstacle moves off-screen, regardless of whether the player jumped or collided. Even when idle and hit, the player still scores once the block exits the screen.

‚úÖ Fix: Only Score If No Collision Occurred
To fix this, we need to track whether a block was successfully avoided (i.e., it exited screen without collision). We can do this by setting a collided flag inside the .filter() loop before awarding score.

üîß Recommended Fix (Replace .filter() logic):
Replace this part:

ts
Copy
Edit
if (obstacle.x < -obstacle.width) {
  setScore(s => {
    const newScore = s + 10;
    playSound('glitch-score');
    return newScore;
  });
  setSuccessBurst({ ... });
  return false;
}
With this:

ts
Copy
Edit
if (obstacle.x < -obstacle.width) {
  // Only award score if obstacle passed without collision
  const GRACE_MARGIN = 4;
  const playerLeft = PLAYER_X;
  const playerRight = PLAYER_X + PLAYER_SIZE;
  const playerTop = playerY;
  const playerBottom = playerY + PLAYER_SIZE;

  const obsLeft = obstacle.x;
  const obsRight = obstacle.x + obstacle.width;
  const obsTop = obstacle.y - obstacle.height;
  const obsBottom = obstacle.y;

  const hasHorizontalOverlap = playerRight > obsLeft + GRACE_MARGIN &&
                               playerLeft < obsRight - GRACE_MARGIN;
  const hasVerticalOverlap = playerBottom > obsTop + GRACE_MARGIN &&
                             playerTop < obsBottom - GRACE_MARGIN;
  const isCollision = hasHorizontalOverlap && hasVerticalOverlap;

  if (!isCollision) {
    setScore(s => {
      const newScore = s + 10;
      playSound('glitch-score');
      return newScore;
    });
    setSuccessBurst({
      x: PLAYER_X + PLAYER_SIZE / 2,
      y: playerY + PLAYER_SIZE / 2,
      time: Date.now()
    });
  }
  return false; // Remove this obstacle either way
}
This ensures that:

‚úÖ Only obstacles dodged will increase the score
‚ùå Collided blocks no longer reward points

